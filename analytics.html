<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <link rel="icon" href="favicon.ico">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Study Analytics - Study Hub</title>
    <link rel="stylesheet" href="grade-tracker.css">
    <link rel="stylesheet" href="analytics.css">
    <style>
        .dev-notice {
            background: linear-gradient(135deg, #f59e0b, #ef4444);
            color: white;
            padding: 1rem;
            text-align: center;
            font-weight: bold;
            border-radius: 8px;
            margin-bottom: 1rem;
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.8; }
        }
    </style>
</head>
<body>
    <header>
        <nav class="navbar">
            <div class="nav-container">
                <div class="logo">
                    <a href="index.html" class="back-link">â†</a>
                    <span class="logo-icon">ğŸ“Š</span>
                    <span class="logo-text">Study Analytics</span>
                </div>
                <div style="display: flex; gap: 1rem; align-items: center;">
                    <button class="theme-toggle-btn" onclick="window.themeManager.showThemeSelector()" title="ğŸ¨ TÃ©ma" style="background: rgba(255,255,255,0.15); border: none; color: white; width: 36px; height: 36px; border-radius: 50%; cursor: pointer; font-size: 1.1rem;">
                        ğŸ¨
                    </button>
                </div>
            </div>
        </nav>
    </header>

    <main class="analytics-main">
        <!-- FejlesztÃ©s alatt figyelmeztetÃ©s -->
        <div class="dev-notice">
            ğŸš§ FEJLESZTÃ‰S ALATT - Az oldal hamarosan elÃ©rhetÅ‘ lesz! ğŸš§
        </div>

        <!-- Ã–sszesÃ­tÅ‘ kÃ¡rtyÃ¡k -->
        <section class="summary-cards">
            <div class="summary-card study-time">
                <div class="summary-icon">â±ï¸</div>
                <div class="summary-content">
                    <span class="summary-value" id="totalStudyTime">0</span>
                    <span class="summary-label">Ã–sszes tanulÃ¡si idÅ‘ (perc)</span>
                </div>
            </div>
            
            <div class="summary-card sessions">
                <div class="summary-icon">ğŸ…</div>
                <div class="summary-content">
                    <span class="summary-value" id="totalSessions">0</span>
                    <span class="summary-label">Pomodoro Sessions</span>
                </div>
            </div>
            
            <div class="summary-card xp">
                <div class="summary-icon">âš¡</div>
                <div class="summary-content">
                    <span class="summary-value" id="totalXp">0</span>
                    <span class="summary-label">Ã–sszes XP</span>
                </div>
            </div>
            
            <div class="summary-card level">
                <div class="summary-icon">ğŸ†</div>
                <div class="summary-content">
                    <span class="summary-value" id="currentLevel">1</span>
                    <span class="summary-label">Szint</span>
                </div>
            </div>
            
            <div class="summary-card streak">
                <div class="summary-icon">ğŸ”¥</div>
                <div class="summary-content">
                    <span class="summary-value" id="currentStreak">0</span>
                    <span class="summary-label">Streak nap</span>
                </div>
            </div>
            
            <div class="summary-card grades">
                <div class="summary-icon">ğŸ“</div>
                <div class="summary-content">
                    <span class="summary-value" id="avgGrade">0</span>
                    <span class="summary-label">Ãtlag jegy</span>
                </div>
            </div>
            
            <div class="summary-card quizzes">
                <div class="summary-icon">â“</div>
                <div class="summary-content">
                    <span class="summary-value" id="totalQuizzes">0</span>
                    <span class="summary-label">KvÃ­zek szÃ¡ma</span>
                </div>
            </div>
            
            <div class="summary-card quiz-avg">
                <div class="summary-icon">ğŸ¯</div>
                <div class="summary-content">
                    <span class="summary-value" id="quizAvg">0%</span>
                    <span class="summary-label">KvÃ­z Ã¡tlag</span>
                </div>
            </div>
        </section>

        <!-- Coming Soon Ã¼zenet -->
        <div style="text-align: center; padding: 4rem 2rem; background: rgba(255,255,255,0.1); border-radius: 16px; margin: 2rem 0;">
            <h2 style="font-size: 2rem; margin-bottom: 1rem;">ğŸ“ˆ Analytics</h2>
            <p style="font-size: 1.2rem; opacity: 0.8; margin-bottom: 2rem;">
                RÃ©szletes statisztikÃ¡k a tanulÃ¡sodrÃ³l<br>
                Diagramok, heatmap-ek Ã©s mÃ©g sok mÃ¡s!
            </p>
            <div style="font-size: 4rem;">ğŸš§</div>
            <p style="margin-top: 1rem; opacity: 0.6;">Hamarosan...</p>
            <a href="index.html" style="display: inline-block; margin-top: 2rem; padding: 1rem 2rem; background: linear-gradient(135deg, #6366f1, #8b5cf6); color: white; text-decoration: none; border-radius: 8px; font-weight: bold;">
                â† Vissza a fÅ‘oldalra
            </a>
        </div>
    </main>

    <footer>
        <div class="footer-content">
            <div class="footer-brand">ğŸ“š Study Hub</div>
            <div class="footer-links">
                <a href="index.html">FÅ‘oldal</a>
                <a href="settings.html">BeÃ¡llÃ­tÃ¡sok</a>
                <a href="data-manager.html">AdatkezelÃ©s</a>
            </div>
            <div class="footer-social">
                <a href="https://github.com/LatinKolbasz" title="GitHub">ğŸ™</a>
                <a href="mailto:pap.bence@liveedu.mathiasz.hu" title="Email">ğŸ“§</a>
            </div>
            <p class="footer-copyright">&copy; 2026 Study Hub - Minden jog fenntartva</p>
        </div>
    </footer>

    <!-- Auth script -->
    <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>
    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyBNdafBY_6jaIDiaHJ6afm1yvFlFZsdspc",
            authDomain: "study-hub-4debf.firebaseapp.com",
            projectId: "study-hub-4debf",
            storageBucket: "study-hub-4debf.firebasestorage.app",
            messagingSenderId: "681045719671",
            appId: "1:681045719671:web:8d9c665212610578f96472",
            measurementId: "G-PGVQL7C70N"
        };
        firebase.initializeApp(firebaseConfig);
    </script>
    <script src="utils/auth.js"></script>
    <script src="utils/theme.js"></script>
    <script src="utils/debug.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            window.authManager.checkAuthAndRedirect('login.html');

            window.authManager.whenAuthReady(() => {
                if (!window.authManager.isLoggedIn()) return;

                const user = window.authManager.getUser();
                if (!user) return;

                const username = user.username || user.email.split('@')[0];
                let hash = 0;
                for (let i = 0; i < username.length; i++) {
                    hash = ((hash << 5) - hash) + username.charCodeAt(i);
                    hash = hash & hash;
                }
                const prefix = 'studyhub_' + Math.abs(hash).toString(36) + '_';

                const gradeData = JSON.parse(localStorage.getItem(prefix + 'gradeTracker') || '{"totalXp":0,"level":1}');
                document.getElementById('totalXp').textContent = gradeData.totalXp || 0;
                document.getElementById('currentLevel').textContent = gradeData.level || 1;

                const timerData = JSON.parse(localStorage.getItem(prefix + 'stats') || '{"totalMinutes":0,"completedSessions":0,"streak":0}');
                document.getElementById('totalStudyTime').textContent = timerData.totalMinutes ? `${Math.floor(timerData.totalMinutes/60)}Ã³ ${timerData.totalMinutes%60}p` : '0 perc';
                document.getElementById('totalSessions').textContent = timerData.completedSessions || 0;
                document.getElementById('currentStreak').textContent = timerData.streak || 0;

                console.log('âœ… Analytics Ã¶sszesÃ­tÅ‘ betÃ¶ltve');
            });
        });
    </script>
</body>
</html>

