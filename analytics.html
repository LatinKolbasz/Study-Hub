<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <link rel="icon" href="favicon.ico">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Study Analytics - Study Hub</title>
    <link rel="stylesheet" href="analytics.css">
    <!-- Chart.js CDN -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
</head>
<body>
    <header>
        <nav class="navbar">
            <div class="nav-container">
                <div class="logo">
                    <a href="index.html" class="back-link">‚Üê</a>
                    <span class="logo-icon">üìä</span>
                    <span class="logo-text">Study Analytics</span>
                </div>
                <div class="nav-actions">
                    <div class="time-range-selector">
                        <button class="range-btn active" data-range="week">H√©t</button>
                        <button class="range-btn" data-range="month">H√≥nap</button>
                        <button class="range-btn" data-range="semester">F√©l√©v</button>
                    </div>
                    <button class="theme-toggle-btn" onclick="window.themeManager && window.themeManager.showThemeSelector()" title="üé® T√©ma">
                        üé®
                    </button>
                </div>
            </div>
        </nav>
    </header>

    <main class="analytics-main">
        <!-- Hero Section -->
        <section class="analytics-hero">
            <div class="hero-left">
                <h1 class="page-title">üìà Tanul√°si √Åttekint√©s</h1>
                <p class="page-subtitle">R√©szletes statisztik√°k √©s elemz√©sek a fejl≈ëd√©sedr≈ël</p>
            </div>
            <div class="hero-right">
                <div class="hero-stat">
                    <span class="hero-stat-value" id="heroProductivity">0%</span>
                    <span class="hero-stat-label">Produktivit√°s</span>
                </div>
                <div class="hero-stat">
                    <span class="hero-stat-value" id="heroTrend">‚Üë</span>
                    <span class="hero-stat-label">Trend</span>
                </div>
            </div>
        </section>

        <!-- √ñsszes√≠t≈ë k√°rty√°k -->
        <section class="summary-cards">
            <div class="summary-card study-time">
                <div class="summary-icon">‚è±Ô∏è</div>
                <div class="summary-content">
                    <span class="summary-value" id="totalStudyTime">0</span>
                    <span class="summary-label">√ñsszes tanul√°si id≈ë</span>
                </div>
                <div class="summary-trend up" id="studyTimeTrend">+12%</div>
            </div>
            
            <div class="summary-card sessions">
                <div class="summary-icon">üçÖ</div>
                <div class="summary-content">
                    <span class="summary-value" id="totalSessions">0</span>
                    <span class="summary-label">Pomodoro sessions</span>
                </div>
                <div class="summary-trend up" id="sessionsTrend">+5</div>
            </div>
            
            <div class="summary-card xp">
                <div class="summary-icon">‚ö°</div>
                <div class="summary-content">
                    <span class="summary-value" id="totalXp">0</span>
                    <span class="summary-label">√ñsszes XP</span>
                </div>
                <div class="summary-trend up" id="xpTrend">+150</div>
            </div>
            
            <div class="summary-card level">
                <div class="summary-icon">üèÜ</div>
                <div class="summary-content">
                    <span class="summary-value" id="currentLevel">1</span>
                    <span class="summary-label">Szint</span>
                </div>
                <div class="summary-trend neutral">-</div>
            </div>
            
            <div class="summary-card streak">
                <div class="summary-icon">üî•</div>
                <div class="summary-content">
                    <span class="summary-value" id="currentStreak">0</span>
                    <span class="summary-label">Streak nap</span>
                </div>
                <div class="summary-trend up" id="streakTrend">Akt√≠v</div>
            </div>
            
            <div class="summary-card grades">
                <div class="summary-icon">üìù</div>
                <div class="summary-content">
                    <span class="summary-value" id="avgGrade">0</span>
                    <span class="summary-label">√Åtlag jegy</span>
                </div>
                <div class="summary-trend up" id="gradeTrend">+0.2</div>
            </div>
            
            <div class="summary-card quizzes">
                <div class="summary-icon">‚ùì</div>
                <div class="summary-content">
                    <span class="summary-value" id="totalQuizzes">0</span>
                    <span class="summary-label">Kv√≠zek sz√°ma</span>
                </div>
                <div class="summary-trend up" id="quizCountTrend">+3</div>
            </div>
            
            <div class="summary-card quiz-avg">
                <div class="summary-icon">üéØ</div>
                <div class="summary-content">
                    <span class="summary-value" id="quizAvg">0%</span>
                    <span class="summary-label">Kv√≠z √°tlag</span>
                </div>
                <div class="summary-trend up" id="quizAvgTrend">+8%</div>
            </div>
        </section>

        <!-- F≈ë diagramok sor -->
        <section class="charts-row two-cols">
            <div class="chart-card">
                <div class="chart-header">
                    <h3>üìÖ Napi tanul√°si id≈ë</h3>
                    <span class="chart-subtitle">Az elm√∫lt hetek aktivit√°sa</span>
                </div>
                <div class="chart-container">
                    <canvas id="studyTimeChart"></canvas>
                </div>
            </div>
            <div class="chart-card">
                <div class="chart-header">
                    <h3>‚ö° XP fejl≈ëd√©s</h3>
                    <span class="chart-subtitle">Kumulat√≠v XP az id≈ë f√ºggv√©ny√©ben</span>
                </div>
                <div class="chart-container">
                    <canvas id="xpProgressChart"></canvas>
                </div>
            </div>
        </section>

        <!-- Jegy diagramok sor -->
        <section class="charts-row two-cols">
            <div class="chart-card">
                <div class="chart-header">
                    <h3>üìä Jegy eloszl√°s</h3>
                    <span class="chart-subtitle">Jegyek megoszl√°sa 1-5 sk√°l√°n</span>
                </div>
                <div class="chart-container">
                    <canvas id="gradeDistributionChart"></canvas>
                </div>
            </div>
            <div class="chart-card">
                <div class="chart-header">
                    <h3>üìö Tant√°rgyi √°tlagok</h3>
                    <span class="chart-subtitle">Tant√°rgyank√©nti teljes√≠tm√©ny</span>
                </div>
                <div class="chart-container">
                    <canvas id="subjectAvgChart"></canvas>
                </div>
            </div>
        </section>

        <!-- Kv√≠z √©s timer sor -->
        <section class="charts-row three-cols">
            <div class="chart-card">
                <div class="chart-header">
                    <h3>üéØ Kv√≠z teljes√≠tm√©ny</h3>
                    <span class="chart-subtitle">Utols√≥ kv√≠z eredm√©nyek</span>
                </div>
                <div class="chart-container">
                    <canvas id="quizPerformanceChart"></canvas>
                </div>
            </div>
            <div class="chart-card">
                <div class="chart-header">
                    <h3>‚è±Ô∏è Munka / Sz√ºnet</h3>
                    <span class="chart-subtitle">Pomodoro id≈ë eloszl√°s</span>
                </div>
                <div class="chart-container small">
                    <canvas id="modeDistributionChart"></canvas>
                </div>
            </div>
            <div class="chart-card">
                <div class="chart-header">
                    <h3>‚úÖ Feladatok</h3>
                    <span class="chart-subtitle">Beadand√≥k √°llapota</span>
                </div>
                <div class="chart-container small">
                    <canvas id="assignmentsChart"></canvas>
                </div>
            </div>
        </section>

        <!-- Heti √∂sszehasonl√≠t√°s √©s √≥r√°nk√©nti aktivit√°s -->
        <section class="charts-row two-cols">
            <div class="chart-card">
                <div class="chart-header">
                    <h3>üìÜ Heti √∂sszehasonl√≠t√°s</h3>
                    <span class="chart-subtitle">Ez a h√©t vs. el≈ëz≈ë h√©t</span>
                </div>
                <div class="chart-container">
                    <canvas id="weeklyComparisonChart"></canvas>
                </div>
            </div>
            <div class="chart-card">
                <div class="chart-header">
                    <h3>üïê Napszak szerinti aktivit√°s</h3>
                    <span class="chart-subtitle">Mikor tanulsz a legt√∂bbet?</span>
                </div>
                <div class="chart-container">
                    <canvas id="hourlyActivityChart"></canvas>
                </div>
            </div>
        </section>

        <!-- Tant√°rgyi radar √©s jegy trend -->
        <section class="charts-row two-cols">
            <div class="chart-card">
                <div class="chart-header">
                    <h3>üéØ Tant√°rgyi k√©szs√©gek</h3>
                    <span class="chart-subtitle">Teljes√≠tm√©ny radar diagram</span>
                </div>
                <div class="chart-container radar-large">
                    <canvas id="skillRadarChart"></canvas>
                </div>
            </div>
            <div class="chart-card">
                <div class="chart-header">
                    <h3>üìà Jegy trend</h3>
                    <span class="chart-subtitle">√Åtlag jegy alakul√°sa id≈ëben</span>
                </div>
                <div class="chart-container">
                    <canvas id="gradeTrendChart"></canvas>
                </div>
            </div>
        </section>

        <!-- Activity Heatmap -->
        <section class="chart-card full-width">
            <div class="chart-header">
                <h3>üü© Aktivit√°si h≈ët√©rk√©p</h3>
                <span class="chart-subtitle">Utols√≥ 12 h√©t napi aktivit√°sa</span>
            </div>
            <div class="heatmap-wrapper">
                <div class="heatmap-day-labels">
                    <span>H</span><span>K</span><span>Sze</span><span>Cs</span><span>P</span><span>Szo</span><span>V</span>
                </div>
                <div id="activityHeatmap" class="heatmap-container"></div>
            </div>
            <div class="heatmap-legend">
                <span>Kevesebb</span>
                <div class="heatmap-legend-item" style="background: var(--border);"></div>
                <div class="heatmap-legend-item" style="background: #c7d2fe;"></div>
                <div class="heatmap-legend-item" style="background: #a5b4fc;"></div>
                <div class="heatmap-legend-item" style="background: #818cf8;"></div>
                <div class="heatmap-legend-item" style="background: #6366f1;"></div>
                <div class="heatmap-legend-item" style="background: #4f46e5;"></div>
                <span>T√∂bb</span>
            </div>
        </section>

        <!-- Insights Section -->
        <section class="insights-section">
            <h3>üí° Szem√©lyre szabott meg√°llap√≠t√°sok</h3>
            <div class="insights-grid" id="insightsGrid">
                <!-- Dynamically populated -->
            </div>
        </section>
    </main>

    <footer>
        <div class="footer-content">
            <div class="footer-brand">üìö Study Hub</div>
            <div class="footer-links">
                <a href="index.html">F≈ëoldal</a>
                <a href="settings.html">Be√°ll√≠t√°sok</a>
                <a href="data-manager.html">Adatkezel√©s</a>
            </div>
            <div class="footer-social">
                <a href="https://github.com/LatinKolbasz" title="GitHub">üêô</a>
                <a href="mailto:pap.bence@liveedu.mathiasz.hu" title="Email">üìß</a>
            </div>
            <p class="footer-copyright">&copy; 2026 Study Hub - Minden jog fenntartva</p>
        </div>
    </footer>

    <!-- Firebase -->
    <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>
    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyBNdafBY_6jaIDiaHJ6afm1yvFlFZsdspc",
            authDomain: "study-hub-4debf.firebaseapp.com",
            projectId: "study-hub-4debf",
            storageBucket: "study-hub-4debf.firebasestorage.app",
            messagingSenderId: "681045719671",
            appId: "1:681045719671:web:8d9c665212610578f96472",
            measurementId: "G-PGVQL7C70N"
        };
        firebase.initializeApp(firebaseConfig);
    </script>
    <script src="utils/auth.js"></script>
    <script src="utils/theme.js"></script>
    <script src="utils/debug.js"></script>
    <script src="utils/tos.js"></script>
    <script src="analytics.js"></script>
</body>
</html>
