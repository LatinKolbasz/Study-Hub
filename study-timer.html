<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <link rel="icon" href="favicon.ico">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Study Timer - Study Hub</title>
    <link rel="stylesheet" href="index.css">
    <link rel="stylesheet" href="study-timer.css">
</head>
<body>
    <header>
        <nav class="navbar">
            <div class="nav-container">
                <div class="logo">
                    <span class="logo-icon">üìö</span>
                    <span class="logo-text">Study Hub</span>
                </div>
                <div style="display: flex; gap: 1rem; align-items: center;">
                    <button class="theme-toggle-btn" onclick="window.themeManager.showThemeSelector()" title="üé® T√©ma" style="background: rgba(255,255,255,0.15); border: none; color: white; width: 36px; height: 36px; border-radius: 50%; cursor: pointer; font-size: 1.1rem;">
                        üé®
                    </button>
                    <a href="index.html" class="back-btn">‚Üê Vissza</a>
                </div>
            </div>
        </nav>
    </header>

    <main class="timer-main">
        <section class="timer-hero">
            <h1 class="page-title">‚è±Ô∏è Study Timer</h1>
            <p class="page-subtitle">Haszn√°ld a Pomodoro technik√°t a hat√©konyabb tanul√°shoz</p>
        </section>

        <div class="timer-container">
            <!-- Timer Display -->
            <div class="timer-display-wrapper">
                <div class="timer-circle">
                    <svg class="timer-svg" viewBox="0 0 200 200">
                        <circle class="timer-bg-circle" cx="100" cy="100" r="90" />
                        <circle class="timer-progress-circle" cx="100" cy="100" r="90" id="progressCircle" />
                    </svg>
                    <div class="timer-content">
                        <div class="timer-mode" id="timerMode">üçÖ Munkasz√ºnet</div>
                        <div class="timer-time" id="timerDisplay">25:00</div>
                        <div class="timer-sessions" id="sessionCounter"../div>
                    </div>
                </div>
            </div>

            <!-- Timer Controls -->
            <div class="timer-controls">
                <button class="timer-btn primary" id="startBtn" onclick="timerManager.startTimer()">
                    <span class="btn-icon">‚ñ∂Ô∏è</span> Ind√≠t√°s
                </button>
                <button class="timer-btn secondary" id="pauseBtn" onclick="timerManager.pauseTimer()" style="display: none;">
                    <span class="btn-icon">‚è∏Ô∏è</span> Sz√ºnet
                </button>
                <button class="timer-btn reset" id="resetBtn" onclick="timerManager.resetTimer()">
                    <span class="btn-icon">üîÑ</span> √öjra
                </button>
                <button class="timer-btn skip" id="skipBtn" onclick="timerManager.skipPhase()">
                    <span class="btn-icon">‚è≠Ô∏è</span> K√∂vetkez≈ë
                </button>
            </div>

            <!-- Timer Settings -->
            <div class="timer-settings">
                <h2>‚öôÔ∏è Be√°ll√≠t√°sok</h2>
                <div class="settings-grid">
                    <div class="setting-item">
                        <label for="workTime">Munka (perc)</label>
                        <input type="number" id="workTime" value="25" min="1" max="60" onchange="timerManager.updateSettings()">
                    </div>
                    <div class="setting-item">
                        <label for="breakTime">R√∂vid sz√ºnet (perc)</label>
                        <input type="number" id="breakTime" value="5" min="1" max="30" onchange="timerManager.updateSettings()">
                    </div>
                    <div class="setting-item">
                        <label for="longBreakTime">Hossz√∫ sz√ºnet (perc)</label>
                        <input type="number" id="longBreakTime" value="15" min="1" max="60" onchange="timerManager.updateSettings()">
                    </div>
                    <div class="setting-item">
                        <label for="sessionsBeforeLong">Munk√°k hossz√∫ sz√ºnet el≈ëtt</label>
                        <input type="number" id="sessionsBeforeLong" value="4" min="2" max="8" onchange="timerManager.updateSettings()">
                    </div>
                </div>
                <label class="sound-toggle">
                    <input type="checkbox" id="soundEnabled" checked onchange="timerManager.toggleSound()">
                    <span class="toggle-label">üîî Hangjelz√©s</span>
                </label>
            </div>

            <!-- Statistics -->
            <div class="timer-stats">
                <h2>üìä Mai Statisztik√°k</h2>
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon">‚úÖ</div>
                        <div class="stat-value" id="completedSessions">0</div>
                        <div class="stat-label">Befejezett munk√°k</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">‚è∞</div>
                        <div class="stat-value" id="totalMinutes">0</div>
                        <div class="stat-label">Perc tanul√°s</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">üéØ</div>
                        <div class="stat-value" id="currentStreak">0</div>
                        <div class="stat-label">Egym√°s ut√°ni napok</div>
                    </div>
                </div>
                <button class="clear-stats-btn" onclick="timerManager.clearStats()">üìâ Statisztik√°k t√∂rl√©se</button>
            </div>
        </div>
    </main>

    <footer>
        <div class="footer-content">
            <div class="footer-brand">üìö Study Hub</div>
            <div class="footer-links">
                <a href="index.html">F≈ëoldal</a>
                <a href="../settings.html">Be√°ll√≠t√°sok</a>
                <a href="../data-manager.html">Adatkezel√©s</a>
            </div>
            <div class="footer-social">
                <a href="https://github.com/LatinKolbasz" title="GitHub">üêô</a>
                <a href="mailto:pap.bence@liveedu.mathiasz.hu" title="Email">üìß</a>
            </div>
            <p class="footer-copyright">&copy; 2026 Study Hub - Minden jog fenntartva</p>
        </div>
    </footer>

    <!-- Auth √©s Timer script -->
    <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>
    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyBNdafBY_6jaIDiaHJ6afm1yvFlFZsdspc",
            authDomain: "study-hub-4debf.firebaseapp.com",
            projectId: "study-hub-4debf",
            storageBucket: "study-hub-4debf.firebasestorage.app",
            messagingSenderId: "681045719671",
            appId: "1:681045719671:web:8d9c665212610578f96472",
            measurementId: "G-PGVQL7C70N"
        };
        firebase.initializeApp(firebaseConfig);
    </script>
    <script src="utils/auth.js"></script>
    <script src="utils/theme.js"></script>
    <script src="study-timer.js"></script>
    <script>
        // Bejelentkez√©s ellen≈ërz√©se
        document.addEventListener('DOMContentLoaded', () => {
            setTimeout(() => {
                if (!window.authManager || !window.authManager.isLoggedIn()) {
                    window.location.href = '../login.html';
                    return;
                }

                // Telemetria
                if (window.authManager && window.authManager.logPageView) {
                    window.authManager.logPageView('study-timer');
                }
            }, 500);
        });
    </script>
</body>
</html>

